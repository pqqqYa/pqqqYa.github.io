---
layout: post
title: 计算机网络基础学习笔记
subtitle: 学习笔记总结归纳
date: 2024-05-29 10:56:00
author: pqqqYa
header-img: img/post/2024-05-29-计算机网络基础学习笔记-bg.jpg
catalog: true
tags:
  - 笔记
  - 计算机网络基础
  - IMIS
---

  

> 文章为课堂笔记整理，使用教材为《计算机网络（谢希仁版）》

> 文章使用了部分latex语法进行公式的书写，在阅读过程中请搭配Latex语法理解


  

# 第一章 概述

## 1.1 计算机网络的两大功能

* 连通性
* 共享  

## 1.2 因特网发展的三个阶段：
  
1. 从单个网络 ARPANET 向互联网发展的过程。
2. 建成了三级结构的因特网。
3. 逐渐形成了多层次 ISP（Internet service provider） 结构的因特网。

## 1.3 NAP（或称为IXP）网络接入点

用来交换因特网上流量；向各ISP提供交换设施，使他们能够互相平等通信

## 1.4 因特网的组成

### 1.4.1 边缘部分

用户利用核心部分提供的服务直接使用网络进行通信并交换或共享信息；主机称为端系统，（是进程之间的通信）

两类通讯方式：
1. 客户服务器方式：客户是服务的请求方，服务器是服务的提供方；客户程序：一对多，必须知道服务器程序的地址；服务程序：可同时处理多个远地或本地客户的请求（被动等待）
2. 对等连接方式（p2p)：平等的、对等连接通信。既是客户端又是服务端

### 1.4.2 核心部分

为边缘部分提供服务的（提供连通性和交换）（主要由路由器和网络组成）；核心中的核心：路由器（转发收到的分组，实现分组交换）

交换——按照某种方式动态地分配传输线路的资源：
1. 电路交换：建立连接（占用通信资源）→通话（一直占用通信资源）→释放资源（归还通信资源）始终占用资源
2. 报文交换：基于存储转发原理（时延较长）
3. 分组交换：报文（message）切割加上首部（包头header）形成分组（包packet）；优点：高效（逐段占用链路，动态分配带宽），灵活（独立选择转发路由），迅速（不建立连接就发送分组），可靠（保证可靠性的网络协议）；存储转发时造成时延；后两者不需要预先分配传输带宽；路由器处理分组过程：缓存→查找转发表→找到合适端口

## 1.5 计算机网络的分类

* 按作用范围：WAN(广），MAN（城），LAN（局），PAN（个人）
* 按使用者：公用网，专用网
* 按介质：有线网，光纤网，无线网络
* 按无线上网方式：WLAN，WWAN（手机）
* 按通信性能：资源共享，分布式计算机，远程通信网络

## 1.6 计算机网络的性能

1. 速率（比特每秒b/s）：数据量/信息量的单位
2. 带宽（两种）：①频域称谓，赫兹Hz，信号具有的频带宽度；②时域称谓，比特每秒（b/s），通信线路的最高数据率；两者本质一样，宽度越大，传输速率自然越高
3. 吞吐量：单位时间内通过某个网络（或信道、接口）的数据量。受网络的带宽或网络的额定速率的限制。 
4. 时延
	* 发送时延（传输时延）：发送时延=数据帧长度(b)÷发送速率(b/s)；发生在及其内部的发送器中；
	* 传播时延：传播时延=信道长度(m)÷电磁波在信道上的传播速率(m/s)；发生在及其外部的传输信道媒体上；
	* 处理时延：交换结点为存储转发而进行一些必要的处理所花费的时间。
	* 排队时延：结点缓存队列中分组排队所经历的时延。（取决于当时的通信量）；
	* 数据的发送速率不是比特在链路上的传播速率。
5. 时延带宽积：时延带宽积（体积）=传播时延（长）×带宽（截面积），以比特为单位的链路长度
6. 往返时间（RTT)：简单来说，就是两倍传播时延（实际上还包括处理时延，排队时延，转发时的发送时延）
7. 利用率：信道利用率→网络利用率（全网络的信道利用率的加权平均值）$D= \frac{D_o}{1-U}$，U为利用率，D为时延，因此利用率不是越高越好。减少方法：增大线路的带宽。

## 1.7 非特征性能
费用，质量，标准化，可靠性，可扩展性和可升级性，易于管理和维护。

## 1.8 计算机网络体系结构

OSI/RM——开放系统互连参考模型（法律上的国际标准）；

TCP/IP——事实上的国际标准；

协议——为进行网络中的数据交换而建立的规则、标准或约定。 三要素：语法（结构和格式），语义（动作），同步（顺序）；

分层的好处：①各层之间是独立的；②灵活性好；③结构上可分割开；④易于实现和维护；⑤能促进标准化工作。

五层体系结构：

* 应用层：为用户正在运行的程序提供服务；（HTTP,SMTP,FTP)
* 运输层：负责进程之间的通信提供服务(TCP报文段，UDP用户数据包)（复用和分用）
* 网络层：负责分组交换网上的不同主句提供通信服务（IP）
* 数据链路层：将网络层交下来的IP数据报组装成帧，在两个相邻节点（主机和路由器之间或路由器之间）间的链路上“透明”地传送帧中的数据
* 物理层：透明地传送比特流（双绞线、同轴电缆等不在物理层）。

## 1.9 实体、协议、服务之间的关系

实体——任何可发送或接受信息的硬件或软件进程；

协议——控制两个对等实体（或多个实体）进行通信的规则的集合；（水平的）

在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务（垂直的）。

要实现本层协议，还需要使用下层所提供的服务。

同一系统相邻两层的实体进行交互的地方，称为服务访问点 SAP (Service Access Point)。 

下面的协议对上面的服务用户是透明的。

IP over Everything    Everything over IP

# 第二章  物理层

## 2.1 基本概念

机械特性（接口）；电气特性（电压范围）；功能特性（电压的意义）；过程特性（顺序）

## 2.2 数据通信系统（源系统→传输系统→目的系统）

* 数据(data)——运送消息的实体。
* 信号(signal)——数据的电气的或电磁的表现。
* “模拟的”(analogous)——代表消息的参数的取值是连续的。
* “数字的”(digital)——代表消息的参数的取值是离散的。
* 码元(code)——在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。

## 2.3 信道

* 单向通信（单工通信）——只能有一个方向的通信而没有反方向的交互。
* 双向交替通信（半双工通信）——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。
* 双向同时通信（全双工通信）——通信的双方可以同时发送和接收信息。
* 基带信号——来自信源的信号，为使信道能够传输低频分量和直流分量，需要进行调制
* 基带调制（仅对波形进行变换）
* 带通调制（使用载波调制）：①调幅；②调频；③调相

![](D:\obsidian\store\Elecbank\post\2024-05-29\信道.png)

## 2.4 信道的极限容量

两因素：
* 信道能够通过的频率范围（码间串扰）——加宽频带；
* 信噪比——信号的平均功率和噪声的平均功率之比；

极限信息传输速率C = W log2(1+S/N)  b/s ；低于C即可实现无差错传输

让每个码元携带更多比特的信息量；

## 2.5 传输媒体

导向型传输媒体:

* 双绞线（衰减随着频率的升高而增大）
* 屏蔽双绞线 STP (Shielded Twisted Pair)（加强抗电磁干扰能力）
* 无屏蔽双绞线 UTP (Unshielded Twisted Pair)
* 同轴电缆（用于传输较高速率的数据）：50 Ω 同轴电缆，75 Ω 同轴电缆
* 光缆：多模光纤，单模光纤（光纤直径下只有一个光的波长）

非导向型传输媒体：

* 短波通信（靠电离层的反射）
* 微波通信：①地面微波接力通信（中继站）；②卫星通信（较大的传播时延）

## 2.6 信道复用技术

* 频分复用：所有用户在同样的时间占用不同的资源；
* 时分复用（同步）：所有用户在不同的时间用同样的频带宽度；（更有利于数字信号的传输）
* 统计时分复用（异步）：动态分配时隙
* 波分复用：光的频分复用
* 码分复用（码分多址CDMA）：不同的码型；每个站分配的码片序列不仅必须各不相同，并且还必须互相正交(orthogonal)（相乘为0，0为-1）。在实用的系统中是使用伪随机码序列。

任何一个码片向量和该码片向量自己的规格化内积都是1 

任何一个码片向量和该码片反码的向量自己的规格化内积都是-1 

任何一个码片向量和其他码片向量的规格化内积都是0

## 2.7 宽带接入技术

ADSL

* 把 0~4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用
* 上行和下行带宽不对称
* 极限传输距离与数据率以及用户线的线径都有很大的关系
* 离散多音调 DMT ——频分复用
* 组成：数字用户线接入复用器（DSLAM）、用户线和用户家中的一些设施

光纤同轴混合网HFC

* 基于CATV网（树型拓扑结构，模拟技术的频分复用）改造的
* 使用光纤模拟技术，采用光的振幅调制AM
* 节点体系结构——模拟光纤连接，构成星形网；提高网络的可靠性，简化了上行信道的设计
* 比CATV网更宽的频谱，且具有双向传输功能

# 第三章  数据链路层

## 3.1 信道

数据链路层有两种信道

1. 点对点信道
2. 广播信道

## 3.2 节点

链路（物理链路）之间没有任何节点

## 3.3 数据链路

数据链路（逻辑链路）与链路不一样，数据链路还加上实现通信协议的硬件（网络适配器）和软件。

## 3.4 帧

协议数据单元。

## 3.5 三个基本问题

* 封装成帧——加上首部和尾部进行帧定界
* 透明传输——字节填充，加上转义字符ESC（1B）
* 差错检测——循环冗余检验CRC。进行模二运算得到的余数（比除数少一位）作为冗余码，数据加上冗余码在除以除数P，得到的余数为0即为无差错
* 凡是接收端数据链路层接受的帧均无差错（无比特差错）
* 要做到“可靠传输”（即发送什么就收到什么）就必须再加上帧编号、确认和重传机制

## 3.6 点对点协议PPP

特点：

* 简单（这是首要的要求）
* 封装成帧 （帧界定符）
* 透明性
* 多种网络层协议（IP、IPX）
* 多种类型链路（串并，同异，高低，电光，动静）
* 差错检测（立即丢弃）
* 检测连接状态（短时间自动检测）
* 最大传送单元（数据部分的最大长度）
* 网络层地址协商
* 数据压缩协商（不要求标准化） 

不需要的功能

* 纠错（不可靠传输）
* 流量控制（由TCP负责）
* 序号（不是可靠传输，在无线时可用）
* 多点线路（不支持一主对多从）
* 半双工或单工链路（只支持全双工）

组成：

* 一个将 IP 数据报封装到串行链路的方法。
* 链路控制协议 LCP (Link Control Protocol)。（数据链路）
* 网络控制协议 NCP (Network Control Protocol)。——用于支持不同的网络层协议

帧格式

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/frameformat.png)
* 字节填充——转义字符（0x7D）
* 零比特填充——5个1后加0

建立过程

* 物理链路→LCP链路→鉴别的LCP链路（PAP）→NCP链路（IP协议对应IPCP）

## 3.7 局域网数据链路层

局域网的特点：

* 网络为一个单位所拥有，且地理范围和站点范围均有限，具有广播功能，，便于扩展，提高系统的R（可靠）A（可用）S（生存）。

局域网的拓扑

* 星形网，环形网（令牌环形），总线网（CSMA/CD和令牌传递），树形网（频分复用的宽带局域网）

共享信道：

* 静态划分信道：频分复用，时分复用，波分复用，码分复用
* 动态媒体接入控制（多点接入）：随机接入，受控接入（多点线路探询(polling)，或轮询。）    

以太网的两个标准——DIX Ethernet V2和IEEE 802.3

适配器的作用

* 进行串行/并行转换。
* 对数据进行缓存。
* 在计算机的操作系统安装设备驱动程序。
* 实现以太网协议。 

CSMA/CD（载波监听多点接入/碰撞检测）协议

* 实施通信简便的两个措施：①采用无连接的工作方式（不编号，不确认）；②曼切斯特编码（一分为二）
* 对点接入——总线型网络
* 载波监听——发送前先监听
* 碰撞检测（冲突检测）——边发送边监听，发送的不确定性；
* 半双工通信
* 争用期（碰撞窗口）——截断二进制指数退避（动态退避）
* 最短有效帧长度为64字节
* 强化碰撞——人为干扰信号
* 帧间最小间隔为9.6微秒

# 3.8 使用广播信道的以太网

集线器的星形拓扑

* 物理上星形网，逻辑上总线网
* 多接口：工作在物理层，简单地转发比特，不进行碰撞检测

以太网的信道利用率

* 成功发送一个帧占用信道的时间=T（帧长除以发送速率）+τ；
* 参数a=τ÷T 越小越好，帧长度要够长
* 极限信道利用率Smax=1/(1+a)

以太网的MAC层

* 名字指出我们所要寻找的那个资源，地址指出那个资源在何处，路由告诉我们如何到达该处
* RA——注册管理机构
* OUI——组织唯一标识符（公司的）
* EUI——扩展唯一标识符
* 适配器检测MAC帧中的目的地址是否发往本帧——单播，广播，多播；
* 最常用的 MAC 帧是以太网 V2 的格式。
![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/MACframe.png)
* 利用曼切斯特编码来确定长度
* 帧间最小间隔导致不需要帧结束定界符
* 以太网不负责重传丢弃的MAC帧

## 3.9 在物理层扩展以太网

光纤扩展；

集线器扩展

优点：
* 使原来属于不同碰撞域的局域网上的计算机能够进行跨碰撞域的通信。
* 扩大了局域网覆盖的地理范围。

缺点：
* 碰撞域增大了，但总的吞吐量并未提高。
* 如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。  

## 3.10 在数据链路层扩展以太网（网桥）

网桥作用（过滤）——根据 MAC 帧的目的地址对收到的帧进行转发（存储转发）。

好处：

* 过滤通信量。 （隔离开碰撞域）
* 扩大了物理范围。（增大工作站的数目）
* 提高了可靠性。（出现故障只影响个别网段）
* 可互连不同物理层、不同 MAC 子层和不同速率（如10 Mb/s 和 100 Mb/s 以太网）的局域网。

缺点：

* 存储转发增加了时延。
* 在MAC 子层并没有流量控制功能。 （缓存空间不够造成溢出导致帧丢失）
* 具有不同 MAC 子层的网段桥接在一起时时延更大。
* 广播风暴（网络拥塞）

在转发帧时，不改变帧的源地址

透明网桥

* 自学习，即插即用（IEEE 802.1D）
* 组成：地址（源地址）+接口+时间（更新用的）
* 生成树算法——任何两个站之间只有一条路径。

源路由网桥

* 发现帧记录所有可能的路由传送
* 广播
* 最佳路由

多接口网桥——以太网交换机

* 全双工
* 独占通信媒体，无碰撞地传输数据
* 有存储转发，也有直通（不检查差错，但提高速率减少时延）

虚拟局域网（VLAN）

* 由一些局域网网段构成的与物理位置无关的逻辑组
* 同一VLAN的成员可以收到其他成员的广播信息

## 3.11 高速以太网（大于100Mb/s）

100BASE-T以太网

* 双绞线；星形拓扑结构；IEEE 802.3的CSMA/CD
* a=τC/L

吉比特以太网

* 全双工和半双工都可以；1Gb/s

# 第四章  网络层
## 4.1 虚电路服务和数据包服务的对比

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/comparison1.png)

## 4.2 虚拟互连网络（IP网）

 使用路由器解决各种异构的物理网络连接在一起的问题；

## 4.3 分类的IP地址

IP地址由ICANN进行分配（中国向APINC）

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/IPaddress.png)

A类地址（2^31——50%）

* 网络号全0表示本机，全1表示环回测试 2^7 -2
* 主机号全0表示本主机的网络地址，全1表示所有主机 2^24 - 2

B类地址

* 网络号（128.0.0.0不可用）2^14 - 1
* 主机号跟A类一样 2^16 - 2

C类地址

* 网络号（192.0.0.0不可用）2^21 - 1
* 主机号（同上）2^8 - 2

特点

* 路由器仅根据网络号来转发分组
* 多归属主机——一个路由器至少要有两个不同的IP地址（每个接口一个）
* 用网桥或转发器连接的局域网仍属于一个网络（相同网络号），用路由器才能连接不同网络

## 4.4 IP地址与硬件地址

* 使用IP地址是为了隐蔽各种底层网络的复杂性而便于分析和研究问题；
* 数据链路层看不到数据包的IP地址
* 路由器只根据目的IP地址的网络号进行路由选择；

## 4.5 ARP（地址解析协议）和RARP

* ARP——IP地址转为MAC地址
* ARP cache——本局域网的主机和路由表的IP地址到MAC地址的映射表
* 请求是广播，响应是单播，一次请求响应，两边同时把双方的信息写进ARP cache
* 不同局域网的主机，要通过路由器进行ARP查询；

## 4.6 IP数据包的格式

* 首部20字节，固定的

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/IPdata.png)

* 总长度——不少于576字节
* 标识，标志，片偏移——用于分片
* TTL（现为跳数限制）——在经过路由器时才减1
* 协议（协议名，协议字段值）
	* ICMP，1
	* IGMP，2
	* TCP，6
	* UDP，17
* 首部检验和——只检验首部，16位反码运算相加再求反码，检验时一样，得到为0即无差错
* IP 首部的可变部分就是一个选项字段，用来支持排错、测量以及安全等措施。
## 4.7 IP层转发分组的流程

* 从一个路由器转发到下一个路由器（信息：目的网络地址，下一跳地址）
* 特定主机路由——对特定的目的主机指明一个路由，方便控制网络和测试网络；
* 默认路由（0.0.0.0）——下一跳路由器的地址不在IP数据包里，而在MAC帧里（转为MAC地址）
* 分组转发算法：直接交付→特定主机路由→下一跳路由器→默认路由。

## 4.8 划分子网

* IP地址::={网络号，子网号，主机号}
* 不改变网络号
* 子网掩码：没必要是连续的1
* 增加了灵活性，减少了连接在网络上的主机总数
* 同样的IP地址和不同的子网掩码可以得出相同的网络地址
* 使用子网时分组的转发，增加了子网掩码

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/ChildNet.png)

## 4.9 CIDR（无分类编址）

* IP地址：：={网络前缀，主机号}；/后表示网络前缀的位数
* 最小地址（全0），最大地址（全1）
* 路由聚合——构成超网

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/CIDR.png)

## 4.10 ICMP（网际控制报文协议）

差错报文
* 3——终点不可达
* 4——源点抑制(Source quench)，放慢发送速率 
* 11——时间超过，TTL=0
* 12——参数问题，首部参数有问题
* 5——改变路由（重定向）(Redirect) 

以下情况不发送差错报文

* 对 ICMP 差错报告报文不再发送 ICMP 差错报告报文。
* 对第一个分片的数据报片的所有后续数据报片都不发送 ICMP 差错报告报文。
* 对具有多播地址的数据报都不发送 ICMP 差错报告报文。
* 对具有特殊地址（如127.0.0.0 或 0.0.0.0）的数据报不发送 ICMP 差错报告报文。

询问报文

* 8或0——回送请求和回答报文，测试目的站是否可达；
* 13或14——时间戳请求和回答报文，时钟同步和测量时间；

应用

* Ping——回送请求和回答报文；没有经过TCP和UDP
* Tracert——时间差错报文和终点不可达报文（最后）

## 4.11 路由选择协议

两类

* 静态路由选择策略（非自适应路由选择）
* 动态路由选择策略（自适应路由选择）

分层次的路由选择协议

* AS：
* IGB（内部网关协议）——RIP（基于距离向量的路由选择）和OSPF；域内路由选择
* EGB（外部网关协议）——BGP-4；域间路由选择

## 4.12 路由器的构成

路由选择

* 核心——路由选择处理机

分组转发

* 组成——交换结构，输入端口，输出端口
	* 路由选择，涉及到多个路由器，总是用软件
	* 转发，只涉及到一个路由器，可用特殊硬件实现
* 路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。 
* 交换结构三种方法：①通过存储器；②通过纵向；③通过互连网络；

## 4.13 VPN

* 专用地址（可重用地址）：10/8，172.16/12，192.168/16
* 利用隧道技术实现VPN

## 4.14 NAT

* 安装在路由器上
* 将本地地址转为全球IP地址

# 第五章 运输层

## 5.1 进程之间的通信

* 面向通信部分的最高层
* 用户功能中的最低层
* 提供应用进程间的逻辑通信

## 5.2 运输层的端口

* 识别各应用层进程
* 只具有本地意义
* 端口范围：①熟知端口（1~1023）；②注册（或登记）端口（1024~49151）；③动态（或客户、短暂）端口号（49152~65535）；

## 5.3 UDP

特点

* 无连接；（减少开销和发送时延）
* 尽最大努力交付
* 面向报文；（对报文不分拆，不合并）
* 没有拥塞控制
* 支持一对一，一对多，多对一，多对多的交互通信
* 首部开销小。（八个字节）
* 无编号

首部格式

* 源端口2字节
* 目的端接口2字节
* 长度2字节
* 检验和2字节（加上伪首部和数据部分）

## 5.4 TCP

特点

* 进程到进程的通信；（点对点，每个进程都需要一个连接）
* 流交付服务；（无结构的字节流）
* 全双工通信；（发送、接收缓存）
* 复用和分用；（发送——复用，接收——分用）
* 面向连接的服务；
* 可靠的服务。（无差错，不丢失，不重复，按序到达）

套接字（socket）

* IP地址加端口号；
* TCP连接：：={socket1，socket2}；

## 5.5 可靠传输的工作原理

停止等待协议（等待确认后在发送）

* 在发送完一个分组后，必须暂时保留已发送的分组的副本
* 分组和确认分组都必须进行编号
* 超时计时器的重传时间应当比数据在分组传输的平均往返时间更长一些
* 自动重传请求 ARQ
* 简单，但信道利用率太低

连续ARQ协议

* 发送窗口，累积确认（对按序到达的最后一个分组发送确认）

## 5.6 TCP首部格式

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/TCPtitle.png)数据偏移——首部长度（最大60字节）；

* ACK——确认号有效
* PSH——立即收到响应
* RST——释放链接
* SYN——连接请求和连接接受
* FIN——释放运输连接
* 窗口——现在允许对方发送的数据量，窗口值是经常在动态变化着；（以字节为单位）
* 检验和——也要加上伪首部
* 紧急指针——窗口为0也可以发送紧急数据
* 选项：MSS（556字节）；窗口扩大（通过左移来扩大）；时间戳（计算RTT）

## 5.7 TCP可靠传输的实现

以字节为单位的滑动窗口

* 窗口位置由后沿和前沿决定
* 必须按序确认
* 发送（接收）缓存>发送（接收）窗口>已发送（按序到达）
* 接收方要有累计确认的功能

超时重传时间的选择

* RTT往返时间
* RTT加权平均往返时间，来一个算一个，一个一个来算；α对应新样本
* RTO超时重传时间略大于RTT
* 重传的报文段不采用其往返时间样本，但每次重传会增加RTO

 选择确认SACK

* 首部选项加上SACK（所需信息过多，可以忽略，选择重传未确认的数据块）

## 5.8 TCP的流量控制

利用滑动窗口实现流量控制

* 发送方的发送窗口不能超过接收方给出的接受窗口的数值；
* 设置持续计时器来防止窗口由零变为非零导致的僵局。

传输的效率（三种机制）

1. 维持一个等于MSS的变量来控制缓存
2. 发送方的推送push操作
3. 计时器期限到了就将缓存数据装入报文段

## 5.9 TCP的拥塞控制

* 拥塞控制是全局的控制，以网络能够承受现有的网络负荷为前提
* 流量控制是端口的控制

拥塞控制方法

1. 慢开始和拥塞避免
	* 慢开始：以MSS作为发送窗口大小的初始值（拥塞窗口），每经过一个传输轮次（从发送到确认），cwnd就加倍；慢开始门限作为慢开始和拥塞避免的转换点
	* 拥塞避免：每一个RTT，cwnd只加1，（线性增长，加法增大）
	* 出现拥塞时，慢开始门限设置为当前窗口值的一半（乘法减小），cwnd设为1
2. 快重传和快恢复
	* 快重传：收到三个重复确认立即发送未被确认的报文段
	* 快恢复：乘法减小后执行加法增大

RED随机早期检测

* 避免全局同步（多个TCP复用）
* 三个参数：①最小门限②最大门限（最小门限的两倍）③概率p
* P的计算方法
![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/RED-P.png)

## 5.10 TCP的运输连接管理

采用客户服务器的连接方式

三个阶段：

1. 连接建立；
	* 三次握手，SYN报文不携带数据，但消耗序号；ACK报文不携带数据，不消耗序号
2. 数据传输
3. 连接释放

FIN段不携带数据，但消耗掉一个序号

# 第六章 应用层

## 6.1 DNS

计算机用户间接使用DNS

使用UDP向域名服务器传输DNS请求报文

结构：采用层次树状结构；域名只是逻辑概念

域名服务器：

* 以区为管辖单位
* 根域名服务器→顶级域名服务器（TLD）→权限域名服务器→本地域名服务器

域名解析过程：

* 主机向本地域名服务器的查询采用递归查询；（请求者身份向上递归）
* 本地域名服务器向根域名服务器的查询采用迭代查询；（常用）

高速缓存：

* 本地域名服务器和主机都会有
* 有计时器（增加时间减少网络开销，减少时间提高域名转换的准确性）

## 6.2 FTP

提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。

基本工作原理

* 主要功能：减少或消除在不同操作系统下处理文件的不兼容性；
* 使用TCP可靠的运输服务；使用客户服务器方式；
* 服务器进程：①主进程：接受新的请求；②从属进程：处理单个请求；
* 两个并行的连接：①控制连接（端口21）：会话期间一直打开；②数据连接（端口20）：连接客户端和服务器端的数据传送进程。

TFTP(端口号69）

* 使用UDP数据报；
* 只支持文件传输，不支持交互
* 像停止等待协议

特点：

1.  每次传送的数据 PDU 中有 512 字节的数据，但最后一次可不足 512 字节（文件结束的标志，若是512的整数倍则发一个只有首部的数据报文）。
2. 数据 PDU 也称为文件块(block)，每个块按序编号，从 1 开始。
3. 支持 ASCII 码或二进制传送。
4. 可对文件进行读或写。
5. 使用很简单的首部。

## 6.3 TELNET（终端仿真协议）

客户服务器方式

传输的格式使用NVT

## 6.4 万维网

信息储藏所

分布式超媒体(hypermedia)系统，它是超文本(hypertext)系统的扩充。

客户服务器方式

特点：

* 利用统一资源定位符URL来标志分布在整个因特网上的万维网文档
* 利用http来实现万维网上的各种链接
* HTML可以是不同作者创作的不同风格的万维网文档都能在因特网上的各种主机上显示出来
* 使用搜索引擎让用户能够很方便地找到所需的信息

URL

* 组成： <协议>://<主机>:<端口>/<路径>；

HTTP超文本传送协议

* 面向事务的协议，可靠
* 本身是无连接的
* http 1.0是无状态的，每次请求有两倍RTT的开销
* http 1.1是持续连接，两种工作方式：①非流水线方式：收到响应后再发出请求；②流水线方式：连续发送，只花费一个RTT时间
* http代理服务器（高速缓存）——存储请求和响应
* 报文结构（ASCII码）：
	1. 请求报文=请求行（方法，URL，http的版本），首部行，实体主体
	2. 响应报文；=状态行（http版本，状态码，简单短语），首部行，实体主体
* Cookie——在服务器和客户之间传递的状态信息

Html超文本标记语言

* 制作万维网网页的标准语言
* 实现动态文档：①增加另一个应用程序；②增加一个机制（CGI）
* CGI——通用网关接口
* Java技术组成：①程序设计语言；②运行环境；③类库
* 搜索引擎：①全文检索；②分类目录搜索引擎（人工）；③元搜索引擎（多个引擎聚合）

## 6.5 电子邮件

* 发送邮件的协议：SMTP
* 读取邮件的协议：POP3 （客户服务器）和 IMAP（联机协议）
* 用户代理 UA 就是用户与电子邮件系统的接口，是电子邮件客户端软件。
* 电子邮件由信封(envelope)和内容(content)两部分组成。

## 6.6 DHCP动态主机配置协议

* 协议软件参数化；自动获取；
* 需要配置的项目
	1.  IP 地址
	2. 子网掩码
	3. 默认路由器的 IP 地址
	4. 域名服务器的 IP 地址

## 6.7 简单网络管理协议 SNMP

* 并不是行政上的管理
* 本功能包括监视网络性能、检测分析网络差错和配置网络设备等

# 第七章  网络安全

## 7.1 计算机网络上的与通信有关的四种威胁

截获；中断；篡改；伪造；

## 7.2 主动攻击

1. 更改报文流
2. 拒绝服务（DoS，DDoS）
3. 伪造连接初始化

## 7.3 对称秘钥密码体制

DES——64位（56为实际秘钥，8位奇偶校验）

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/DES.png)

RSA

* 设有公钥和私钥；私钥由公钥决定，但不能由其推导
* 加密方法的安全性取决于秘钥的长度以及计算量

![](https://raw.githubusercontent.com/pqqqYa/pqqqYa.github.io/main/img/post/2024-05-29/RSA.png)


## 7.4 数字签名

报文鉴别；报文的完整性；不可否认；先解后加



## 后续章节

音视频服务的分类：①流式存储音视频；②流式实况音视频；③交互式音视频。

无线以太网协议——IEEE 802.11；使用CSMA/CA协议（碰撞避免）；

IPV6——128字节（全球48位，子网16位，接口64位）；